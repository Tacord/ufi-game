[gd_scene load_steps=16 format=3 uid="uid://bovfxbg5t40sd"]

[ext_resource type="PackedScene" uid="uid://2ewum80cfidx" path="res://scenes/player.tscn" id="1_2q6dc"]
[ext_resource type="Script" uid="uid://csb7v5rikyubp" path="res://scripts/level.gd" id="1_w8frs"]
[ext_resource type="PackedScene" uid="uid://dilp511xr1wd0" path="res://scenes/ringpull.tscn" id="2_ppgk2"]
[ext_resource type="PackedScene" uid="uid://sc2g2uhl3ecm" path="res://scenes/gear.tscn" id="3_klq6b"]
[ext_resource type="PackedScene" uid="uid://gvqwukqhs85t" path="res://scenes/magnet.tscn" id="4_mx8sn"]
[ext_resource type="Texture2D" uid="uid://df0ducnt1srt" path="res://assets/tempbackground.png" id="5_klq6b"]
[ext_resource type="FontFile" uid="uid://cgpos0gnmt7ke" path="res://assets/Bright Aura.ttf" id="6_2r41h"]

[sub_resource type="LabelSettings" id="LabelSettings_klq6b"]
font = ExtResource("6_2r41h")
font_size = 100

[sub_resource type="Animation" id="Animation_klq6b"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("UI/Score:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("UI/Fade:color")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0, 0, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("UI/TutorialText:modulate")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_2r41h"]
resource_name = "addscore"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("UI/Score:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.099999994),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1.3, 1.3), Vector2(1, 1)]
}

[sub_resource type="Animation" id="Animation_b121j"]
resource_name = "fade"
length = 2.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("UI/Fade:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0, 0, 0, 0), Color(0, 0, 0, 1)]
}

[sub_resource type="Animation" id="Animation_8c41q"]
resource_name = "tutorialfadein"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("UI/TutorialText:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.46666667),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 0.7058824)]
}

[sub_resource type="Animation" id="Animation_olg7q"]
resource_name = "tutorialfadeout"
length = 0.6
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("UI/TutorialText:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0.7058824), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_b121j"]
_data = {
&"RESET": SubResource("Animation_klq6b"),
&"addscore": SubResource("Animation_2r41h"),
&"fade": SubResource("Animation_b121j"),
&"tutorialfadein": SubResource("Animation_8c41q"),
&"tutorialfadeout": SubResource("Animation_olg7q")
}

[sub_resource type="Environment" id="Environment_klq6b"]
background_mode = 3
glow_enabled = true
glow_bloom = 0.1

[node name="Level" type="Node2D"]
script = ExtResource("1_w8frs")
ringpull = ExtResource("2_ppgk2")
gear = ExtResource("3_klq6b")

[node name="Player" parent="." instance=ExtResource("1_2q6dc")]
position = Vector2(967, 949)

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]
motion_mirroring = Vector2(0, 5000)

[node name="Background" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer"]
modulate = Color(0.3779188, 0.3779189, 0.37791875, 1)
z_index = -10
position = Vector2(954, -1300)
scale = Vector2(2, 2)
texture = ExtResource("5_klq6b")

[node name="Magnet" parent="." instance=ExtResource("4_mx8sn")]
position = Vector2(960, 823)

[node name="Ringpull Timer" type="Timer" parent="."]
wait_time = 0.1
autostart = true

[node name="Gear Timer" type="Timer" parent="."]
autostart = true

[node name="UI" type="CanvasLayer" parent="."]

[node name="Score" type="Label" parent="UI"]
anchors_preset = -1
anchor_left = 0.50600004
anchor_top = 0.116000004
anchor_right = 0.50600004
anchor_bottom = 0.116000004
offset_left = -963.5201
offset_top = -142.28
offset_right = 962.4799
offset_bottom = 141.72
pivot_offset = Vector2(962.05, 138.305)
text = "0"
label_settings = SubResource("LabelSettings_klq6b")
horizontal_alignment = 1
vertical_alignment = 1

[node name="Fade" type="ColorRect" parent="UI"]
z_index = 200
offset_left = -533.0
offset_top = -172.0
offset_right = 2392.0
offset_bottom = 1363.0
color = Color(0, 0, 0, 0)

[node name="TutorialText" type="RichTextLabel" parent="UI"]
modulate = Color(1, 1, 1, 0)
offset_left = 374.0
offset_top = 182.0
offset_right = 1561.0
offset_bottom = 355.0
theme_override_fonts/normal_font = ExtResource("6_2r41h")
theme_override_font_sizes/normal_font_size = 50
text = "Press ðŸ¡¸ or ðŸ¡º to move"
horizontal_alignment = 1
vertical_alignment = 1

[node name="ScoreAnimation" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_b121j")
}

[node name="Fade" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_b121j")
}

[node name="CPUParticles2D" type="CPUParticles2D" parent="."]
position = Vector2(974, -86)
amount = 500
lifetime = 10.0
emission_shape = 3
emission_rect_extents = Vector2(1200, 100)
gravity = Vector2(0, 100)
angular_velocity_min = -10.0
angular_velocity_max = 10.0
scale_amount_min = 2.0
scale_amount_max = 5.0
color = Color(1, 1, 1, 0.85490197)

[node name="Death" type="ColorRect" parent="."]
visible = false
z_index = 99
offset_left = -533.0
offset_top = -172.0
offset_right = 2392.0
offset_bottom = 1363.0
color = Color(0, 0, 0, 1)

[node name="DifficultyTimer" type="Timer" parent="."]
autostart = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_klq6b")

[connection signal="timeout" from="Ringpull Timer" to="." method="_on_ringpull_timer_timeout"]
[connection signal="timeout" from="Gear Timer" to="." method="_on_gear_timer_timeout"]
[connection signal="timeout" from="DifficultyTimer" to="." method="_on_difficulty_timer_timeout"]
